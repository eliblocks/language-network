---
http_interactions:
- request:
    method: post
    uri: https://api.openai.com/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"gpt-4o-2024-11-20","messages":[{"role":"system","content":"You
        are a bot that makes connections.\nPeople message you when they need something
        and whenever you feel you have enough information you let them know that you
        will be on the lookout for any users that can be of use to them.\nYou need
        enough detail about something before you can make a search so you can find
        someone that is a good match.\nOnce you have made a match the search is complete,
        until a user wants something else or requests another match.\n"},{"role":"user","content":"We
        need to determine the current status of the conversation with the user below.\nAre
        we currently searching for matches for the user?\n\nactive - We are currently
        searching for matches.\ninactive - We are not searching for matches at this
        moment.\n\nWe need to align with the assistant in the conversation.\nSo if
        we recently asked the user for more details, the status would not be active
        because we are still collecting information.\nAnd if we already found a match
        and have not started a new search, they would also not be active.\n\nUSER
        CONVERSATION\nuser id: 2051\nuser first name: Palma\n\n\ndate: 2024-11-30
        20:18:13\nrole: user\ncontent: Hello\n\ndate: 2024-11-30 20:18:13\nrole: assistant\ncontent:
        Hello! I''m a bot that can connect you to people. Tell me a little about what
        you''re looking for and I''ll try to find someone relevant to you.\n\n\n\n"}],"response_format":{"type":"json_schema","json_schema":{"name":"user_status","schema":{"type":"object","properties":{"status":{"type":"string","description":"Indicates
        whether a user is active or inactive.","enum":["active","inactive"]},"explanation":{"type":"string","description":"explanation
        for the given status."}},"required":["status","explanation"],"additionalProperties":false},"strict":true}},"temperature":0.5,"store":true,"metadata":{"type":"status","environment":"test"}}'
    headers:
      Content-Type:
      - application/json
      Authorization:
      - Bearer <OPENAI_SECRET>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Sat, 30 Nov 2024 20:18:14 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Access-Control-Expose-Headers:
      - X-Request-ID
      Openai-Organization:
      - user-esz09v1ru9ycpuh3vohbbyka
      Openai-Processing-Ms:
      - '426'
      Openai-Version:
      - '2020-10-01'
      X-Ratelimit-Limit-Requests:
      - '500'
      X-Ratelimit-Limit-Tokens:
      - '30000'
      X-Ratelimit-Remaining-Requests:
      - '499'
      X-Ratelimit-Remaining-Tokens:
      - '9961'
      X-Ratelimit-Reset-Requests:
      - 120ms
      X-Ratelimit-Reset-Tokens:
      - 40.076s
      X-Request-Id:
      - req_184495f8a5e2102fae7db3f9af631d19
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      Cf-Cache-Status:
      - DYNAMIC
      Set-Cookie:
      - __cf_bm=lwSryLg_pnzcktRiD0W7ZQkhjCgGv0EAtSzeKrD0YVE-1732997894-1.0.1.1-MLOTFpg_sc86g4Ncnjdv.do8ux4CQBxsL3Xxc7e4c0riHo_51D1ocCamAUSyEjFyosPrJz7eNTyD9QkSN9aC1Q;
        path=/; expires=Sat, 30-Nov-24 20:48:14 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=U0LfyO3uYpM5r08c.O9c1U4G0NDk66kzKo.3jIKbp4M-1732997894734-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      X-Content-Type-Options:
      - nosniff
      Server:
      - cloudflare
      Cf-Ray:
      - 8ead86869aacc484-EWR
      Alt-Svc:
      - h3=":443"; ma=86400
    body:
      encoding: ASCII-8BIT
      string: |
        {
          "id": "chatcmpl-AZOCs1Tc4qDj3AoElO7ITGippdqrH",
          "object": "chat.completion",
          "created": 1732997894,
          "model": "gpt-4o-2024-11-20",
          "choices": [
            {
              "index": 0,
              "message": {
                "role": "assistant",
                "content": "{\"status\":\"inactive\",\"explanation\":\"The assistant has greeted the user and is awaiting further details to begin a search.\"}",
                "refusal": null
              },
              "logprobs": null,
              "finish_reason": "stop"
            }
          ],
          "usage": {
            "prompt_tokens": 361,
            "completion_tokens": 25,
            "total_tokens": 386,
            "prompt_tokens_details": {
              "cached_tokens": 0,
              "audio_tokens": 0
            },
            "completion_tokens_details": {
              "reasoning_tokens": 0,
              "audio_tokens": 0,
              "accepted_prediction_tokens": 0,
              "rejected_prediction_tokens": 0
            }
          },
          "system_fingerprint": "fp_28935134ad"
        }
  recorded_at: Sat, 30 Nov 2024 20:18:14 GMT
- request:
    method: post
    uri: https://api.openai.com/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"gpt-4o-2024-11-20","messages":[{"role":"system","content":"You
        are a bot that makes connections.\nPeople message you when they need something
        and whenever you feel you have enough information you let them know that you
        will be on the lookout for any users that can be of use to them.\nYou need
        enough detail about something before you can make a search so you can find
        someone that is a good match.\nOnce you have made a match the search is complete,
        until a user wants something else or requests another match.\n"},{"role":"user","content":"We
        need to determine the current status of the conversation with the user below.\nAre
        we currently searching for matches for the user?\n\nactive - We are currently
        searching for matches.\ninactive - We are not searching for matches at this
        moment.\n\nWe need to align with the assistant in the conversation.\nSo if
        we recently asked the user for more details, the status would not be active
        because we are still collecting information.\nAnd if we already found a match
        and have not started a new search, they would also not be active.\n\nUSER
        CONVERSATION\nuser id: 2051\nuser first name: Palma\n\n\ndate: 2024-11-30
        20:18:13\nrole: user\ncontent: Hello\n\ndate: 2024-11-30 20:18:13\nrole: assistant\ncontent:
        Hello! I''m a bot that can connect you to people. Tell me a little about what
        you''re looking for and I''ll try to find someone relevant to you.\n\n\ndate:
        2024-11-30 20:18:14\nrole: user\ncontent: I''m a software engineer in NYC
        with experience using Ruby on Rails at several SaaS startups. Looking for
        a new in-person position with good benefits and work life balance.\n\ndate:
        2024-11-30 20:18:14\nrole: assistant\ncontent: Great! I''ll let you know if
        I find someone looking for an engineer with your skills\n\n\n"}],"response_format":{"type":"json_schema","json_schema":{"name":"user_status","schema":{"type":"object","properties":{"status":{"type":"string","description":"Indicates
        whether a user is active or inactive.","enum":["active","inactive"]},"explanation":{"type":"string","description":"explanation
        for the given status."}},"required":["status","explanation"],"additionalProperties":false},"strict":true}},"temperature":0.5,"store":true,"metadata":{"type":"status","environment":"test"}}'
    headers:
      Content-Type:
      - application/json
      Authorization:
      - Bearer <OPENAI_SECRET>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Sat, 30 Nov 2024 20:18:15 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Access-Control-Expose-Headers:
      - X-Request-ID
      Openai-Organization:
      - user-esz09v1ru9ycpuh3vohbbyka
      Openai-Processing-Ms:
      - '387'
      Openai-Version:
      - '2020-10-01'
      X-Ratelimit-Limit-Requests:
      - '500'
      X-Ratelimit-Limit-Tokens:
      - '30000'
      X-Ratelimit-Remaining-Requests:
      - '499'
      X-Ratelimit-Remaining-Tokens:
      - '9805'
      X-Ratelimit-Reset-Requests:
      - 120ms
      X-Ratelimit-Reset-Tokens:
      - 40.388s
      X-Request-Id:
      - req_07de7092fbdbc3b522bfac219fb1e95d
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      Cf-Cache-Status:
      - DYNAMIC
      Set-Cookie:
      - __cf_bm=HTYFVbZMGwT70YzHlDEBiFgwndSiZAHVPZz6bT5tbRE-1732997895-1.0.1.1-e9TXAFFJlojB53a19Iwa76DgN95Rq0A2fF6.SCRo8KKBehYNiXQ7Lwyks6WrAn15xKS0QTU7StNk6Cmuv4elqg;
        path=/; expires=Sat, 30-Nov-24 20:48:15 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=UTFcC_jpZu0VMKwi_aiaAXTE9uBTo8RFC.tpPJSF_Wc-1732997895339-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      X-Content-Type-Options:
      - nosniff
      Server:
      - cloudflare
      Cf-Ray:
      - 8ead868a9f41427f-EWR
      Alt-Svc:
      - h3=":443"; ma=86400
    body:
      encoding: ASCII-8BIT
      string: |
        {
          "id": "chatcmpl-AZOCtvqFE3F0z1dd9sKQJ0DdGdoTH",
          "object": "chat.completion",
          "created": 1732997895,
          "model": "gpt-4o-2024-11-20",
          "choices": [
            {
              "index": 0,
              "message": {
                "role": "assistant",
                "content": "{\"status\":\"active\",\"explanation\":\"The assistant has sufficient information and is currently searching for matches for the user's request.\"}",
                "refusal": null
              },
              "logprobs": null,
              "finish_reason": "stop"
            }
          ],
          "usage": {
            "prompt_tokens": 456,
            "completion_tokens": 25,
            "total_tokens": 481,
            "prompt_tokens_details": {
              "cached_tokens": 0,
              "audio_tokens": 0
            },
            "completion_tokens_details": {
              "reasoning_tokens": 0,
              "audio_tokens": 0,
              "accepted_prediction_tokens": 0,
              "rejected_prediction_tokens": 0
            }
          },
          "system_fingerprint": "fp_28935134ad"
        }
  recorded_at: Sat, 30 Nov 2024 20:18:15 GMT
recorded_with: VCR 6.3.1
